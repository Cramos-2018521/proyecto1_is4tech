<form [formGroup]="miFormulario" (ngSubmit)="guardar()" class="formulario">
  <div class="form-group">
    <label for="nombre">Nombre:</label>
    <input
      type="text"
      id="nombre"
      formControlName="nombre"
      maxlength="45"
      (blur)="validarCampo('nombre')"
      class="form-control"
    />
    <div *ngIf="mostrarError('nombre')" class="error">
      Nombre es requerido y no debe contener caracteres especiales.
    </div>
  </div>

  <div class="form-group">
    <label for="fechaNacimiento">Fecha de Nacimiento:</label>
    <input
      type="date"
      id="fechaNacimiento"
      formControlName="fechaNacimiento"
      (blur)="validarCampo('fechaNacimiento')"
      class="form-control"
    />
    <div *ngIf="mostrarError('fechaNacimiento')" class="error">
      La fecha de nacimiento no puede ser mayor a la fecha actual.
    </div>
  </div>

  <div class="form-group">
    <label for="nit">NIT:</label>
    <input
      type="number"
      id="nit"
      formControlName="nit"
      (blur)="validarCampo('nit')"
      class="form-control"
    />
    <div *ngIf="mostrarError('nit')" class="error">
      El NIT debe tener un formato válido.
    </div>
  </div>

  <div class="form-group">
    <label for="comentario">Comentario:</label>
    <textarea
      id="comentario"
      formControlName="comentario"
      maxlength="200"
      (blur)="validarCampo('comentario')"
      class="form-control"
    ></textarea>
    <div *ngIf="mostrarError('comentario')" class="error">
      Comentario es requerido.
    </div>
  </div>

  <div class="form-group">
    <label for="nuevoIngreso">Nuevo Ingreso:</label>
    <input type="checkbox" id="nuevoIngreso" formControlName="nuevoIngreso" />
  </div>

  <div *ngIf="miFormulario.get('nuevoIngreso')?.value">
    <div class="form-group">
      <label for="telefonoEmergencia">Teléfono de Emergencia:</label>
      <input
        type="number"
        id="telefonoEmergencia"
        formControlName="telefonoEmergencia"
        (blur)="validarCampo('telefonoEmergencia')"
        class="form-control"
      />
      <div *ngIf="mostrarError('telefonoEmergencia')" class="error">
        Teléfono de emergencia debe tener 8 dígitos.
      </div>
    </div>

    <div class="form-group">
      <label for="direccion">Dirección:</label>
      <input
        type="text"
        id="direccion"
        formControlName="direccion"
        (blur)="validarCampo('direccion')"
        class="form-control"
      />
      <div *ngIf="mostrarError('direccion')" class="error">
        Dirección es requerida.
      </div>
    </div>
  </div>

  <div class="botones">
    <button
      type="submit"
      [disabled]="miFormulario.invalid"
      class="btn btn-primary"
    >
      Guardar
    </button>
    <button type="button" (click)="limpiar()" class="btn btn-secondary">
      Limpiar
    </button>
  </div>
</form>
